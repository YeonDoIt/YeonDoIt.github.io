---
title: "교착 상태 해결 방법"
author: yeon
date: 2024-11-08 22:35:00 +0900
categories: [DEV, 운영체제]
tags: [예방, 회피, 검출 후 회복, 안전 순서열, 안전 상태, 불안전 상태]
---

- 교착 상태 해결 : 예방, 회피, 검출 후 회복

![alt text](image.png)

## 교착 상태 예방

- 애초에 교착 상태가 발생하지 않도록
- 교착 상태 발생 조건(상호 배제, 점유와 대기, 비선점, 원형 대기) 중 하나를 없애버리기
    - 상호 배제를 없애면? → 모든 자원을 공유 가능하게 만든다
    - 점유와 대기를 없애면? → 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분 → 자원의 활용률을 낮출 수 있는 방식
    - 비선점 조건을 없애면? → 선점이 가능한 자원(e.g. CPU)에 한해 효과적 → 모든 자원이 선점가능한 것은 아님
    - 원형 대기 조건을 없애면? → 자원에 번호를 붙이고 오름차순으로 할당하면 원형 대기는 발생하지 않음 → 자원에 번호를 붙이는 것은 어려운 작업, 어떤 자원에 어떤 번호를 붙이느냐에 따라 활용률이 달라짐
- 교착 상태가 발생하지 않음은 보장할 수 있으나 부작용이 따르는 방식

## 교착 상태 회피

- 교착 상태를 **무분별한 자원 할당으로 인해 발생**했다고 간주
- 교착 상태가 발생하지 않을만큼 **조심 조심 할당**하기
- 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을만큼만 자원 배분
- 안전 순서열 : 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
- 안전 상태 : 교착 상태 없이 모든 프로세스가 자원을 할당받고 종료될 수 있는 상태 (안전 순서열이 있는 상태)
- 불안전 상태 : 교착 상태가 발생할 수도 있는 상태 (안전 순서열이 없는 상태)

### 안전 상태

- 컴퓨터 시스템에 총 12개의 자원
- 프로세스 P1, P2, P3가 각각 5개, 2개, 2개의 자원을 할당받아 실행 중
    - 운영체제가 배분할 수 있는 자원의 개수는? 3개
- 프로세스 P1, P2, P3는 각각 최대 10개, 4개, 9개 자원을 요구할 수 있다고 가정

![alt text](image-1.png)

- 안전 순서열이 존재 : P2 → P1 → P3
- 프로세스 P1, P2, P3이 모두 최대로 자원을 요구한 최악의 상황 가정
    - P1, P2, P3이 각각 5개, 2개, 7개의 자원을 요구한 상황 가정
- P2는 이미 자원 두 개를 가지고 있으므로 남은 자원에서 두 개를 배분

![alt text](image-2.png)

- 요구한 자원을 할당받은 P2는 정상적으로 작업을 끝낸 뒤 갖고 있던 자원을 반환
    - 남은 자원은 5개

![alt text](image-3.png)

- P1에게 남은 자원 5개 할당 : P1 또한 정상적으로 작업 완료

![alt text](image-4.png)

- P1이 작업을 마치고 자원을 반환하면 P3에게 자원을 할당
- 즉, P2 → P1 → P3이라는 안전 순서열대로 할당하면 모든 프로세스 실행 가능

![alt text](image-5.png)

- 안전 상태에서 안전 상태로 움직이는 경우에만 자원을 할당하는 방식
- 항시 안전 상태를 유지하도록 자원을 할당하는 방식
- c.f. 은행원 알고리즘

## 교착 상태 검출 후 회복

- 교착 상태의 발생을 인정하고 사후에 조치하는 방식
- 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복
- 선점을 통한 회복, 프로세스 강제 종료를 통한 회복

### 선점을 통한 회복

- 교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식

### 프로세스 강제 종료를 통한 회복

- 교착 상태에 놓은 프로세스 모두 강제 종료 (→ 작업 내역을 잃을 위험)
- 교착 상태가 해결될 때까지 한 프로세스씩 강제 종료 (→ 오버 헤드)

## 교착 상태 무시

- 타조 알고리즘